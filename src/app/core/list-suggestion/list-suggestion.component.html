<div class="container">
  <header class="page-header">
    <h1>ğŸ“‹ Suggestions du Personnel</h1>
    <p class="subtitle">GÃ©rez et consultez toutes les suggestions de l'Ã©quipe</p>
  </header>

  <div class="suggestions-container">
    <!-- En-tÃªte avec compteur -->
    <div class="suggestions-header">
      <h2>ğŸ“ Liste des Suggestions</h2>
      <div class="stats">
        <span class="stat-item">
          <strong>{{ suggestions.length }}</strong> suggestions
        </span>
        <span class="stat-item">
          <strong>{{ getAcceptedCount() }}</strong> acceptÃ©es
        </span>
        <span class="stat-item">
          <strong>{{ getPendingCount() }}</strong> en attente
        </span>
      </div>
    </div>

    <!-- BARRE DE RECHERCHE (Ã‰tape 8) -->
    <div class="search-section">
      <div class="search-bar">
        <div class="search-input-group">
          <span class="search-icon">ğŸ”</span>
          <input
            type="text"
            placeholder="Rechercher par titre ou description..."
            [(ngModel)]="searchText"
            class="search-input"
          >q
        </div>

        <select [(ngModel)]="selectedCategory" class="category-select">
          <option value="">Toutes les catÃ©gories</option>
          <option *ngFor="let category of categories" [value]="category">
            {{ category }}
          </option>
        </select>

        <button (click)="clearSearch()" class="clear-btn" *ngIf="searchText || selectedCategory">
          âœ• Effacer
        </button>
      </div>

      <!-- RÃ©sultats de recherche -->
      <div class="search-results">
        <span class="results-count">
          {{ getResultsCount() }} suggestion(s) trouvÃ©e(s)
        </span>
        <span class="search-filters" *ngIf="searchText || selectedCategory">
          <span *ngIf="searchText">ğŸ“ "{{ searchText }}"</span>
          <span *ngIf="selectedCategory">ğŸ·ï¸ {{ selectedCategory }}</span>
        </span>
      </div>
    </div>

    <!-- Compteur de favoris -->
    <div class="favorites-counter" *ngIf="favorites.length > 0">
      <div class="favorites-info">
        <span class="favorites-icon">â­</span>
        <span class="favorites-text">
          Vous avez <strong>{{ favorites.length }}</strong> suggestion(s) favorite(s)
        </span>
      </div>
    </div>

    <!-- Liste des suggestions filtrÃ©es -->
    <div class="suggestions-grid">
      <div *ngFor="let suggestion of filteredSuggestions" class="suggestion-card">

        <!-- En-tÃªte de la carte avec badge de statut -->
        <div class="card-header">
          <span class="suggestion-id">#{{ suggestion.id }}</span>
          <span class="status-badge" [ngClass]="getStatusClass(suggestion.status)">
            {{ getStatusLabel(suggestion.status) }}
          </span>
        </div>

        <!-- Titre -->
        <h3 class="suggestion-title">{{ suggestion.title }}</h3>

        <!-- Description -->
        <p class="suggestion-description">{{ suggestion.description }}</p>

        <!-- MÃ©tadonnÃ©es -->
        <div class="suggestion-meta">
          <div class="meta-item">
            <span class="meta-icon">ğŸ·ï¸</span>
            <span class="meta-label">CatÃ©gorie:</span>
            <span class="meta-value">{{ suggestion.category }}</span>
          </div>

          <div class="meta-item">
            <span class="meta-icon">ğŸ“…</span>
            <span class="meta-label">Date:</span>
            <span class="meta-value">{{ suggestion.date | date:'dd/MM/yyyy' }}</span>
          </div>

          <div class="meta-item">
            <span class="meta-icon">ğŸ‘</span>
            <span class="meta-label">Likes:</span>
            <span class="meta-value">{{ suggestion.nbLikes }}</span>
          </div>
        </div>

        <!-- SÃ©parateur -->
        <hr class="card-divider">

        <!-- BOUTONS LIKE/FAVORIS (Ã‰tape 7) -->
        <div class="card-actions" *ngIf="suggestion.status !== 'refusee'">
          <div class="buttons-container">
            <button class="like-btn" (click)="incrementLike(suggestion)">
              <span class="btn-icon">ğŸ‘</span>
              <span class="btn-text">Like ({{ suggestion.nbLikes }})</span>
            </button>

            <button class="favorite-btn"
                    (click)="addToFavorites(suggestion)"
                    [disabled]="isInFavorites(suggestion)">
              <span class="btn-icon">â­</span>
              <span class="btn-text">
                {{ isInFavorites(suggestion) ? 'DÃ©jÃ  favori' : 'Ajouter aux favoris' }}
              </span>
            </button>
          </div>
        </div>

        <!-- Message pour suggestions refusÃ©es -->
        <div class="card-actions" *ngIf="suggestion.status === 'refusee'">
          <p class="refused-message">âŒ Cette suggestion a Ã©tÃ© refusÃ©e</p>
        </div>
      </div>
    </div>

    <!-- Message si aucun rÃ©sultat -->
    <div *ngIf="filteredSuggestions.length === 0" class="no-results">
      <div class="no-results-content">
        <span class="no-results-icon">ğŸ”</span>
        <h3>Aucune suggestion trouvÃ©e</h3>
        <p>Aucune suggestion ne correspond Ã  votre recherche.</p>
        <button (click)="clearSearch()" class="clear-search-btn">
          Afficher toutes les suggestions
        </button>
      </div>
    </div>
  </div>

  <!-- Pied de page -->
  <footer class="page-footer">
    <p>Â© 2025 - SystÃ¨me de Gestion des Suggestions</p>
    <p class="footer-stats">
      Total: {{ suggestions.length }} suggestions |
      Favoris: {{ favorites.length }} |
      Recherche: {{ getResultsCount() }} rÃ©sultats
    </p>
  </footer>
</div>
